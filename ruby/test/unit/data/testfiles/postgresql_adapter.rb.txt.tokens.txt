.t.e.s.t. heredoc
GSF_LINE_COMMENT  "# Boiled down code snippet from postgresql_adapter.rb which trips up the\n", st=0
GSF_LINE_COMMENT  "# lexer; the query call is not properly lexed\n", st=0
MODULE          "module", la=2, st=0
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
GSF_CONSTANT    "ActiveRecord", la=2, st=2
GSF_WHITESPACE  "\n", la=1, st=RubyLexerState[commandstart,null,EXPR_BEG,null,null]
GSF_WHITESPACE  "  ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
DEF             "def", la=2, st=6
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_FNAME,null,null]
GSF_IDENTIFIER  "indexes", la=2, st=1
GSF_LPAREN      "(", la=1, st=RubyLexerState[commandstart,null,EXPR_BEG,null,null]
GSF_IDENTIFIER  "table_name", la=2, st=3
GSF_IDENTIFIER  ",", la=1, st=0
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
GSF_IDENTIFIER  "name", la=2, st=2
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_ARG,null,null]
NONUNARY_OP     "=", la=1, st=0
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
GSF_ANY_KEYWORD  "nil", la=2, st=1
GSF_RPAREN      ")", la=1, st=1
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_END,null,null]
GSF_LINE_COMMENT  "#:nodoc:\n", st=RubyLexerState[commandstart|spaceseen,null,EXPR_BEG,null,null]
GSF_WHITESPACE  "    ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
GSF_IDENTIFIER  "result", la=2, st=2
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_ARG,null,null]
NONUNARY_OP     "=", la=1, st=0
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
GSF_IDENTIFIER  "query", la=2, st=2
GSF_LPAREN      "(", la=1, st=RubyLexerState[commandstart,null,EXPR_BEG,null,null]
GSF_STRING_BEGIN  "<<-SQL", la=1, st=RubyLexerState[-,null,EXPR_BEG,null,HeredocContext(count=2):end:false,term:HeredocTerm[34,SQL,null,0],end:true,term:HeredocTerm[34,SQL,null,0]]
GSF_IDENTIFIER  ",", st=RubyLexerState[-,null,EXPR_BEG,null,HeredocContext(count=2):end:false,term:HeredocTerm[34,SQL,null,0],end:true,term:HeredocTerm[34,SQL,null,0]]
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,HeredocContext(count=2):end:false,term:HeredocTerm[34,SQL,null,0],end:true,term:HeredocTerm[34,SQL,null,0]]
GSF_IDENTIFIER  "name", la=2, st=RubyLexerState[-,null,EXPR_ARG,null,HeredocContext(count=2):end:false,term:HeredocTerm[34,SQL,null,0],end:true,term:HeredocTerm[34,SQL,null,0]]
GSF_RPAREN      ")", la=1, st=RubyLexerState[-,null,EXPR_END,null,HeredocContext(count=2):end:false,term:HeredocTerm[34,SQL,null,0],end:true,term:HeredocTerm[34,SQL,null,0]]
GSF_WHITESPACE  "\n", la=1, st=RubyLexerState[commandstart,null,EXPR_BEG,null,HeredocContext(count=2):end:false,term:HeredocTerm[34,SQL,null,0],end:true,term:HeredocTerm[34,SQL,null,0]]
GSF_STRING_LITERAL  "      SELECT i.relname, d.indisunique, a.attname\n        FROM pg_class t, pg_class i, pg_index d, pg_attribute a\n       WHERE i.relkind = 'i'\n         AND d.indexrelid = i.oid\n         AND d.indisprimary = 'f'\n         AND t.oid = d.indrelid\n         AND t.relname = '", la=2, st=RubyLexerState[commandstart,HeredocTerm[34,SQL,null,1],EXPR_BEG,HeredocTermState[1],HeredocContext(count=1):end:true,term:HeredocTerm[34,SQL,null,1]]
GSF_STRING_LITERAL  "#{", st=RubyLexerState[embedded|commandstart,HeredocTerm[34,SQL,null,2],EXPR_BEG,HeredocTermState[2],HeredocContext(count=1):end:true,term:HeredocTerm[34,SQL,null,2]]
EMBEDDED_RUBY   "table_name", la=1, st=RubyLexerState[commandstart,HeredocTerm[34,SQL,null,1],EXPR_BEG,HeredocTermState[1],HeredocContext(count=1):end:true,term:HeredocTerm[34,SQL,null,1]]
GSF_STRING_LITERAL  "}'\n         AND a.attrelid = t.oid\n         AND ( d.indkey[0]=a.attnum OR d.indkey[1]=a.attnum\n            OR d.indkey[2]=a.attnum OR d.indkey[3]=a.attnum\n            OR d.indkey[4]=a.attnum OR d.indkey[5]=a.attnum\n            OR d.indkey[6]=a.attnum OR d.indkey[7]=a.attnum\n            OR d.indkey[8]=a.attnum OR d.indkey[9]=a.attnum )\n      ORDER BY i.relname\n    ", la=4, st=RubyLexerState[commandstart,HeredocTerm[34,SQL,null,1],EXPR_BEG,HeredocTermState[1],HeredocContext(count=1):end:true,term:HeredocTerm[34,SQL,null,1]]
GSF_STRING_END  "SQL\n", st=RubyLexerState[commandstart,null,EXPR_END,null,null]
GSF_WHITESPACE  "  ", la=1, st=RubyLexerState[spaceseen,null,EXPR_END,null,null]
END             "end", la=2, st=1
GSF_WHITESPACE  "\n\n", la=1, st=RubyLexerState[commandstart,null,EXPR_BEG,null,null]
GSF_WHITESPACE  "  ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
DEF             "def", la=2, st=6
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_FNAME,null,null]
GSF_IDENTIFIER  "columns", la=2, st=1
GSF_LPAREN      "(", la=1, st=RubyLexerState[commandstart,null,EXPR_BEG,null,null]
GSF_IDENTIFIER  "table_name", la=2, st=3
GSF_IDENTIFIER  ",", la=1, st=0
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
GSF_IDENTIFIER  "name", la=2, st=2
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_ARG,null,null]
NONUNARY_OP     "=", la=1, st=0
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
GSF_ANY_KEYWORD  "nil", la=2, st=1
GSF_RPAREN      ")", la=1, st=1
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_END,null,null]
GSF_LINE_COMMENT  "#:nodoc:\n", st=RubyLexerState[commandstart|spaceseen,null,EXPR_BEG,null,null]
GSF_WHITESPACE  "    ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
GSF_IDENTIFIER  "column_definitions", la=2, st=2
GSF_LPAREN      "(", la=1, st=RubyLexerState[commandstart,null,EXPR_BEG,null,null]
GSF_IDENTIFIER  "table_name", la=2, st=3
GSF_RPAREN      ")", la=1, st=1
DOT             ".", la=1, st=7
GSF_IDENTIFIER  "collect", la=2, st=2
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_ARG,null,null]
DO              "do", la=2, st=0
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
GSF_IDENTIFIER  "|", la=1, st=0
GSF_IDENTIFIER  "name", la=2, st=2
GSF_IDENTIFIER  ",", la=1, st=0
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
GSF_IDENTIFIER  "type", la=2, st=2
GSF_IDENTIFIER  ",", la=1, st=0
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
GSF_IDENTIFIER  "default", la=2, st=2
GSF_IDENTIFIER  ",", la=1, st=0
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
GSF_IDENTIFIER  "notnull", la=2, st=2
GSF_IDENTIFIER  ",", la=1, st=0
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
GSF_IDENTIFIER  "typmod", la=2, st=2
GSF_IDENTIFIER  "|", la=1, st=0
GSF_WHITESPACE  "\n", la=1, st=0
GSF_WHITESPACE  "      ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
GSF_LINE_COMMENT  "# typmod now unused as limit, precision, scale all handled by superclass\n", st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
GSF_WHITESPACE  "      ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
GSF_CONSTANT    "Column", la=2, st=2
DOT             ".", la=1, st=7
GSF_IDENTIFIER  "new", la=2, st=2
GSF_LPAREN      "(", la=1, st=RubyLexerState[commandstart,null,EXPR_BEG,null,null]
GSF_IDENTIFIER  "name", la=2, st=3
GSF_IDENTIFIER  ",", la=1, st=0
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
GSF_IDENTIFIER  "default_value", la=2, st=2
GSF_LPAREN      "(", la=1, st=RubyLexerState[commandstart,null,EXPR_BEG,null,null]
GSF_IDENTIFIER  "default", la=2, st=3
GSF_RPAREN      ")", la=1, st=1
GSF_IDENTIFIER  ",", st=0
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
GSF_IDENTIFIER  "translate_field_type", la=2, st=2
GSF_LPAREN      "(", la=1, st=RubyLexerState[commandstart,null,EXPR_BEG,null,null]
GSF_IDENTIFIER  "type", la=2, st=3
GSF_RPAREN      ")", la=1, st=1
GSF_IDENTIFIER  ",", st=0
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
GSF_IDENTIFIER  "notnull", la=2, st=2
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_ARG,null,null]
NONUNARY_OP     "==", la=1, st=0
GSF_WHITESPACE  " ", la=1, st=RubyLexerState[spaceseen,null,EXPR_BEG,null,null]
QUOTED_STRING_BEGIN  """, st=RubyLexerState[substituting,StringTerm[func=expand,term=",paren=0,nest=0,embed=1],EXPR_BEG,StringTermState[nest=0,embed=1],null]
QUOTED_STRING_LITERAL  "f", la=1, st=RubyLexerState[substituting,StringTerm[func=expand,term=",paren=0,nest=0,embed=1],EXPR_BEG,StringTermState[nest=0,embed=1],null]
QUOTED_STRING_END  """, st=RubyLexerState[substituting,null,EXPR_END,null,null]
GSF_RPAREN      ")", st=RubyLexerState[substituting,null,EXPR_END,null,null]
GSF_WHITESPACE  "\n", la=1, st=RubyLexerState[substituting|commandstart,null,EXPR_BEG,null,null]
GSF_WHITESPACE  "    ", la=1, st=RubyLexerState[substituting|spaceseen,null,EXPR_BEG,null,null]
END             "end", la=2, st=RubyLexerState[substituting,null,EXPR_END,null,null]
GSF_WHITESPACE  "\n", la=1, st=RubyLexerState[substituting|commandstart,null,EXPR_BEG,null,null]
GSF_WHITESPACE  "  ", la=1, st=RubyLexerState[substituting|spaceseen,null,EXPR_BEG,null,null]
END             "end", la=2, st=RubyLexerState[substituting,null,EXPR_END,null,null]
GSF_WHITESPACE  "\n", la=1, st=RubyLexerState[substituting|commandstart,null,EXPR_BEG,null,null]
END             "end", la=1, st=RubyLexerState[substituting,null,EXPR_END,null,null]
----- EOF -----

<Unnamed test>
----- EOF -----

